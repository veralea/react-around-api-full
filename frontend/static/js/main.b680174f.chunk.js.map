{"version":3,"sources":["utils/api.js","components/Footer.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoToolTip.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Api","options","this","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","then","_getResponseData","name","about","method","body","JSON","stringify","cardData","link","id","userId","cardId","avatar","api","token","Footer","className","withRouter","props","localStorage","getItem","onClick","e","preventDefault","isLoggedIn","handleLogout","history","push","updateHeader","document","location","pathname","includes","textHeaderLink","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","valueOf","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","onCardDelete","src","alt","onCardClick","onCardLike","length","Main","onEditAvatarClick","style","backgroundImage","onEditProfileClick","onAddPlaceClick","cards","map","PopupWithForm","isOpen","onClose","onSubmit","title","children","buttonText","ImagePopup","EditProfilePopup","useState","setName","description","setDescription","useEffect","onUpdateUser","onChange","target","value","minLength","maxLength","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","placeholder","AddPlacePopup","setLink","onAddPlaceSubmit","InfoToolTip","iconMessage","textMessage","email","setEmail","password","setPassword","register","authorize","ProtectedRoute","Component","component","to","BASE_URL","getResponseData","App","useHistory","setTextHeaderLink","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoToolTipOpen","setIsInfoToolTipOpen","setIconMessage","setTextMessage","setCards","selectedCard","setSelectedCard","isRegistered","setIsRegistered","setCurrentUser","setToken","handleRegisterSubmit","icon","text","closeAllPopups","window","href","getUserInfo","result","catch","err","console","log","getCards","closeByEscape","key","addEventListener","removeEventListener","auth","setItem","removeItem","Provider","exact","path","changeLikes","newCard","state","c","deleteCard","newCards","filter","handleLogin","setUserAvatar","setUserInfo","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b680174f.chunk.js","sourcesContent":["class Api {\r\n    constructor (options){\r\n      this._baseUrl = options.baseUrl;\r\n      this._headers = options.headers;\r\n    }\r\n  \r\n    _getResponseData(res) {\r\n      if (!res.ok) {\r\n          return Promise.reject(`Error: ${res.status}`);\r\n      }\r\n      return res.json();\r\n  }\r\n  \r\n    getUserInfo() {\r\n      return fetch(`${this._baseUrl}/users/me`,{\r\n        headers: this._headers,\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    getCards() {\r\n      return fetch(`${this._baseUrl}/cards`,{\r\n        headers: this._headers\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    setUserInfo({ name, about }) {\r\n      return fetch(`${this._baseUrl}/users/me`,{\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about\r\n        })\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    addNewCard({cardData}) {\r\n      return fetch(`${this._baseUrl}/cards`,{\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: cardData.name,\r\n          link: cardData.link\r\n        })\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    deleteCard(id,userId) {\r\n     return fetch(`${this._baseUrl}/cards/${id}/${userId}`,{\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    changeLikes(cardId, method) {\r\n      return fetch (`${this._baseUrl}/cards/likes/${cardId}`,{\r\n        method: method,\r\n        headers: this._headers\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  \r\n    setUserAvatar(avatar) {\r\n      return fetch (`${this._baseUrl}/users/me/avatar`,{\r\n        method: \"PATCH\",\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: avatar\r\n        })\r\n      }).then(res => this._getResponseData(res));\r\n    }\r\n  }\r\n\r\n  const api = (token) => new Api({\r\n    baseUrl: 'http://localhost:3000',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  }); \r\n  \r\n  export default api;","function Footer() {\r\n  return(\r\n    <footer className=\"footer\">\r\n    <p className=\"footer__copyright\">&copy; 2021 Around The U.S.</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import { withRouter } from 'react-router-dom';\r\n\r\nfunction Header({...props}) {\r\n  function handleClick(e) {\r\n    e.preventDefault();\r\n    if (props.isLoggedIn) {\r\n      props.handleLogout();\r\n      props.history.push(\"/signin\");\r\n      props.updateHeader(\"Sign up\");\r\n    } else {\r\n      if (document.location.pathname.includes(\"signup\")) {\r\n        props.history.push(\"/signin\");\r\n        props.updateHeader(\"Sign up\");\r\n      } else if (document.location.pathname.includes(\"signin\")) {\r\n        props.history.push(\"/signup\");\r\n        props.updateHeader(\"Log in\");\r\n      }\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <header className=\"header\">\r\n        <div className=\"header__logo\"></div>\r\n        <div className=\"header__content\">\r\n          <div className=\"header__email\">{localStorage.getItem(\"email\") || \"\"}</div>\r\n          {\r\n            <span className=\"header__link\" onClick={handleClick}>\r\n              {props.textHeaderLink}\r\n            </span>\r\n          }\r\n        </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default withRouter(Header);","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import { useContext } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner.valueOf() === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = (\r\n    `card__delete-button ${isOwn ? 'card__delete-button_visible' : 'card__delete-button_hidden'}`\r\n    );\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName  = (\r\n    `button card__like-button ${isLiked ? 'card__like-button_state_liked' : 'card__like-button_state_unliked'}`\r\n  );\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike();\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    props.onCardDelete();\r\n  }\r\n\r\n  return(\r\n    <li className=\"card\" >\r\n      <button \r\n        type=\"button\" \r\n        className={cardDeleteButtonClassName}\r\n        aria-label=\"delete button\"\r\n        onClick = {handleDeleteClick}\r\n      ></button>\r\n      <img \r\n        className=\"card__picture\" \r\n        src={props.card.link} \r\n        alt={props.card.name}\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"card__caption\">\r\n        <p className=\"card__title\">{props.card.name}</p>\r\n        <div className=\"card__like-container\">\r\n          <button \r\n            type=\"button\" \r\n            className={cardLikeButtonClassName} \r\n            aria-label=\"like button\"\r\n            onClick={handleLikeClick}\r\n          >\r\n          </button>\r\n          <span className=\"card__like-counter\">{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;","import { useContext } from 'react';\r\nimport Card from './Card'; \r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n  const currentUser = useContext(CurrentUserContext); \r\n\r\n  return(\r\n    <main className=\"main\">  \r\n        <section className=\"profile\">\r\n            <div \r\n                className=\"profile__avatar\" \r\n                onClick={props.onEditAvatarClick}\r\n                style={{ backgroundImage: `url(${currentUser.avatar})` }}\r\n            >\r\n              <div className=\"profile__avatar-cover\"></div>    \r\n            </div>\r\n            <div className=\"profile__title\">\r\n              <span className=\"profile__name\">{currentUser.name}</span>\r\n              <button className=\"button profile__edit-button\" aria-label=\"edit button\"\r\n                  onClick={props.onEditProfileClick}>\r\n              <div className=\"profile__edit-image\"></div>\r\n              </button>\r\n            </div>\r\n            <p className=\"profile__job\">{currentUser.about}</p>\r\n            <button className=\"button profile__add-button\" aria-label=\"add button\" \r\n              onClick={props.onAddPlaceClick}>\r\n              <div className=\"profile__add-image\"></div>\r\n            </button>\r\n        </section>\r\n        <section>\r\n          <ul className=\"cards-grid\">\r\n            {\r\n              props.cards.map((card) => {\r\n                return(\r\n                  <Card \r\n                    key={card._id} \r\n                    card={card} \r\n                    onCardClick={props.onCardClick}\r\n                    onCardLike={(e) => props.onCardLike(card)}\r\n                    onCardDelete={(e) => props.onCardDelete(card)}\r\n                  />\r\n                );\r\n              })\r\n            }\r\n          </ul>\r\n        </section>\r\n    </main> \r\n  );\r\n}\r\n\r\nexport default Main","function PopupWithForm(props) { \r\n    return (\r\n        <section className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\r\n        <div className=\"popup__container\">\r\n            <button \r\n                className=\"button popup__close-button\" \r\n                aria-label=\"close button\"\r\n                onClick={props.onClose}\r\n            ></button>\r\n            <form className={`popup__form popup__form_type_${props.name}`} onSubmit={props.onSubmit}>\r\n            <h2 className=\"popup__title\">{`${props.title}`}</h2>\r\n            {props.children}\r\n            <button type=\"submit\" name=\"submit\"\r\n                className=\"button popup__button popup__button\">\r\n                {props.buttonText}\r\n            </button>\r\n            </form>\r\n        </div>\r\n        </section>\r\n\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","function ImagePopup(props) {\r\n    return(\r\n      <section \r\n        className={`popup popup_type_img ${props.isOpen ? 'popup_opened' : ''}`}\r\n      >\r\n        <div className=\"popup__container\">\r\n            <button \r\n              className=\"button popup__close-button\" \r\n              aria-label=\"close button\"\r\n              onClick={props.onClose}\r\n            ></button>\r\n            <img className=\"popup__image\" src={props.card ? props.card.link : \"#\"} alt={props.card ? props.card.name : \"nothing\"} />\r\n            <p className=\"popup__caption\">{props.card ? props.card.name : \"\"}</p>\r\n        </div>\r\n      </section>         \r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import { useState, useEffect, useContext } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const [name, setName] = useState(currentUser.name);\r\n  const [description, setDescription] = useState(\"joker\")\r\n  \r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleJobChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n    \r\n  }, [currentUser, props.isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm \r\n      name='edit' \r\n      title='Edit profile' \r\n      buttonText='Save'\r\n      isOpen={props.isOpen} \r\n      onClose={props.onClose} \r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input type=\"text\" className=\"popup__input\" onChange = {handleNameChange}\r\n        name=\"name\" value={name} minLength=\"2\" maxLength=\"40\" required />\r\n      <span className=\"popup__error\"></span>\r\n      <input type=\"text\" className=\"popup__input\" onChange = {handleJobChange}\r\n        name=\"job\" value={description} minLength=\"2\" maxLength=\"200\" required />\r\n      <span className=\"popup__error\"></span>\r\n    </PopupWithForm>        \r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from \"./PopupWithForm\";\r\nimport { useRef } from 'react';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = useRef('https://cdn.pixabay.com/photo/2018/01/17/07/06/laptop-3087585_960_720.jpg');\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n  }\r\n\r\n  \r\n  return (\r\n    <PopupWithForm \r\n      name='update-avatar' \r\n      title='Change profile picture' \r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      buttonText='Save'\r\n      onSubmit={handleSubmit}\r\n    >  \r\n      <input \r\n        type=\"url\" \r\n        className=\"popup__input\"\r\n        ref={avatarRef} \r\n        name=\"avatar\"     \r\n        placeholder=\"Avatar link\" required />\r\n      <span className=\"popup__error\"></span>    \r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import { useState, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = useState('');\r\n  const [link, setLink] = useState('');\r\n  \r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleLinkChange(e) {\r\n    setLink(e.target.value);\r\n  }\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlaceSubmit({\r\n      name: name,\r\n      link: link\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n  }, [props.isOpen]);\r\n  \r\n  return (\r\n    <PopupWithForm \r\n      name='add' \r\n      title='New place' \r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      buttonText='Create'\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input type=\"text\" className=\"popup__input\" name=\"name\" value={name} onChange = {handleNameChange}\r\n        placeholder=\"Title\" minLength=\"1\" maxLength=\"30\" required />\r\n      <span className=\"popup__error\"></span>\r\n      <input type=\"url\" className=\"popup__input\" name=\"link\" value={link} onChange = {handleLinkChange}\r\n        placeholder=\"Image link\" required />\r\n      <span className=\"popup__error\"></span>\r\n    </PopupWithForm>  \r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","function InfoToolTip(props) {\r\n    return(\r\n      <section \r\n        className={`popup popup_type_msg ${props.isOpen ? 'popup_opened' : ''}`}\r\n      >\r\n        <div className=\"popup__container\">\r\n            <button \r\n              className=\"button popup__close-button\" \r\n              aria-label=\"close button\"\r\n              onClick={props.onClose}\r\n            ></button>\r\n            <div className=\"popup__message-main\">\r\n              <div className={props.iconMessage}></div>\r\n              <p className=\"popup__message\">{props.textMessage}</p>\r\n            </div>\r\n        </div>\r\n      </section>         \r\n    );\r\n}\r\n\r\nexport default InfoToolTip;","import React from 'react';\r\nimport { withRouter  } from 'react-router-dom';\r\nimport { useState } from \"react\";\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  \r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.register(e,email, password);\r\n  }\r\n\r\n  function redirectToLogin() {\r\n    props.history.push(\"/signin\");\r\n    props.updateHeader(\"Sign up\");\r\n  }\r\n\r\n  return (\r\n    <section className='access'>\r\n      <form className='access__form' onSubmit={handleSubmit}>\r\n      <h2 className=\"access__title\">{`${props.title}`}</h2>\r\n      <input type=\"email\" className=\"access__input\" onChange = {handleEmailChange}\r\n        name=\"email\" value={email} placeholder=\"Email\" required />\r\n      <span className=\"access__error\"></span>\r\n      <input type=\"password\" className=\"access__input\" onChange = {handlePasswordChange}\r\n        name=\"password\" value={password} placeholder=\"Password\" required />\r\n      <span className=\"access__error\"></span>\r\n      <button type=\"submit\" name=\"submit\"\r\n          className=\"button access__button\">\r\n          {props.buttonText}\r\n      </button>\r\n      </form>\r\n      <span className=\"access__link\" onClick={redirectToLogin}>\r\n        Already a member? Log in here!\r\n      </span>\r\n    </section>\r\n  );\r\n}\r\n  \r\nexport default withRouter(Register);","import React from 'react';\r\nimport { withRouter  } from 'react-router-dom';\r\nimport { useState } from \"react\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  \r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.authorize(e,email, password);\r\n  }\r\n\r\n  function redirectToRegister() {\r\n    props.history.push(\"/signup\");\r\n    props.updateHeader(\"Log in\");\r\n  }\r\n\r\n  return (\r\n    <section className='access'>\r\n      <form className='access__form' onSubmit={handleSubmit}>\r\n        <h2 className=\"access__title\">{`${props.title}`}</h2>\r\n        <input type=\"email\" className=\"access__input\" onChange = {handleEmailChange}\r\n          name=\"email\" value={email} placeholder=\"Email\" required />\r\n        <span className=\"access__error\"></span>\r\n        <input type=\"password\" className=\"access__input\" onChange = {handlePasswordChange}\r\n          name=\"password\" value={password} placeholder=\"Password\" required />\r\n        <span className=\"access__error\"></span>\r\n        <button type=\"submit\" name=\"submit\"\r\n            className=\"button access__button\">\r\n            {props.buttonText}\r\n        </button>\r\n      </form>\r\n      <span className=\"access__link\" onClick={redirectToRegister}>\r\n        Not a member yet? Sign up here!\r\n      </span>\r\n    </section>\r\n  );\r\n}\r\n  \r\nexport default withRouter(Login);\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"/signin\" />}\r\n    </Route>  \r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;","export const BASE_URL = 'http://localhost:3000'\r\n\r\nfunction getResponseData(res) {\r\n\r\n  if (!res.ok) {\r\n    return Promise.reject(`Error: ${res.status}`); \r\n  } else {\r\n    \r\n    return res;\r\n  }\r\n\r\n}\r\n\r\nexport const register = (email, password) => {\r\n  console.log(`${BASE_URL}/signup`);\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email, \r\n      password\r\n    })\r\n  })\r\n   .then((res) => getResponseData(res));\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`,{\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password}) \r\n  })\r\n   .then((res) => getResponseData(res));\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n      }\r\n    })\r\n    .then((res) => getResponseData(res));\r\n} ","import '../App.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\r\nimport api from \"../utils/api\";\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport InfoToolTip from './InfoToolTip';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport * as auth from '../utils/auth';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  const isLoggedIn = localStorage.getItem('isLoggedIn');\r\n  \r\n  const [textHeaderLink, setTextHeaderLink] = useState(\"\");\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = useState(false);\r\n  const [iconMessage, setIconMessage] = useState(\"\");\r\n  const [textMessage, setTextMessage] = useState(\"\");\r\n  const [cards , setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [isRegistered, setIsRegistered] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({name: \"noting\"});\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\"));\r\n\r\n  useEffect(() => {\r\n    api(token).getUserInfo()    \r\n    .then((result) => {\r\n      setCurrentUser(result);\r\n    })\r\n    .catch((err) => console.log(err));\r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    api(token).getCards()    \r\n    .then((result) => {\r\n        setCards(result);\r\n    })\r\n    .catch((err) => console.log(err))\r\n  },[]);\r\n\r\n  function handleRegisterSubmit({ icon,text }) {\r\n    setIconMessage(icon);\r\n    setTextMessage(text); \r\n    setIsInfoToolTipOpen(true);      \r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsInfoToolTipOpen(false);\r\n    setSelectedCard(null);\r\n    if (isRegistered && window.location.href.includes(\"/signup\")) {\r\n      history.push('/signin');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const closeByEscape = (e) => {\r\n      if (e.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', closeByEscape);  \r\n    return () => document.removeEventListener('keydown', closeByEscape);\r\n}, [])\r\n\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleUpdateUser({name, about}) {\r\n    api(token).setUserInfo({name, about})\r\n    .then((result) => {\r\n      setCurrentUser(result);\r\n      closeAllPopups();\r\n    })\r\n    .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api(token).setUserAvatar(avatar)\r\n    .then((result) => {\r\n      setCurrentUser(result);\r\n      closeAllPopups();    \r\n    })\r\n    .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    api(token).changeLikes(card._id, !isLiked ? \"PUT\" : \"DELETE\").then((newCard) => {\r\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n    })\r\n    .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api(token).deleteCard(card._id, currentUser._id).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id);\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => console.log(err));   \r\n  }\r\n\r\n  function handleAddPlaceSubmit(cardData) { \r\n    api(token).addNewCard({cardData})\r\n    .then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n      closeAllPopups();\r\n    })\r\n    .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleLogin(e,email) {\r\n    e.preventDefault();\r\n    localStorage.setItem('email',email);\r\n    localStorage.setItem('isLoggedIn',true);\r\n    updateHeader('Log out');\r\n  }\r\n\r\n  function handleLogout() {\r\n    setToken(null);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('email');\r\n    localStorage.removeItem('isLoggedIn');\r\n    updateHeader('Sign up');\r\n  }\r\n\r\n  function register(e,email, password) {\r\n    e.preventDefault();\r\n    auth.register(email, password).then((res) => {\r\n      handleRegisterSubmit(\r\n        {\r\n          icon:\"popup__icon\", \r\n          text:\"Success! You have now been registered.\"\r\n        });     \r\n      setIsRegistered(true); \r\n    })\r\n    .catch((err) => {\r\n      handleRegisterSubmit(\r\n        {\r\n          icon:\"popup__icon_unsuccess\", \r\n          text: \"Oops, something went wrong! Please try again.\"\r\n        });\r\n      setIsRegistered(false);   \r\n    });    \r\n  }\r\n\r\n  function authorize(e,email, password) {\r\n    e.preventDefault();\r\n    auth.authorize(email, password)\r\n    .then(result => result.json())\r\n    .then((res) => {\r\n        setToken(res.token);\r\n        localStorage.setItem('token', res.token);\r\n        localStorage.setItem('isLoggedIn', true);\r\n        handleLogin(e,email);\r\n        history.push('/');\r\n        updateHeader(\"Log out\");\r\n    })\r\n    .catch((err) => {\r\n      handleRegisterSubmit(\r\n        {\r\n          icon:\"popup__icon_unsuccess\", \r\n          text: \"Oops, something went wrong! Please try again.\"\r\n        });\r\n    });  \r\n  }\r\n\r\n  useEffect(() => { \r\n     if (token) {\r\n       auth.getContent(token)\r\n       .then(result => result.json())\r\n       .then((res) => {\r\n        localStorage.setItem('email',res.email);\r\n        setCurrentUser(res);\r\n       })\r\n       .catch((err) => {\r\n        handleRegisterSubmit(\r\n          {\r\n            icon:\"popup__icon_unsuccess\", \r\n            text: \"Oops, something went wrong! Please try again.\"\r\n          });\r\n       });\r\n     }else {\r\n      localStorage.removeItem('email');\r\n     }\r\n  },[token]);\r\n\r\n  function updateHeader(text) {\r\n    setTextHeaderLink(text); \r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      updateHeader(\"Log out\");\r\n    } else {\r\n      if (document.location.pathname.includes(\"signup\")) {\r\n        updateHeader(\"Log in\");\r\n      } else if (document.location.pathname.includes(\"signin\")) {\r\n        updateHeader(\"Sign up\");\r\n      }\r\n    }\r\n\r\n  },[token]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page__content\">       \r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <Header \r\n            isLoggedIn={isLoggedIn}\r\n            handleLogout={handleLogout}\r\n            textHeaderLink={textHeaderLink}\r\n            updateHeader={updateHeader}\r\n          />\r\n          <Switch>\r\n             <ProtectedRoute\r\n              exact\r\n              path=\"/\" \r\n              isLoggedIn={isLoggedIn} \r\n              onEditProfileClick={handleEditProfileClick} \r\n              onAddPlaceClick={handleAddPlaceClick}\r\n              onEditAvatarClick={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              component={Main}\r\n            />\r\n            \r\n            <Route exact path=\"/signup\">\r\n              <Register\r\n                title=\"Sign up\"\r\n                buttonText=\"Sign up\"\r\n                updateHeader={updateHeader}\r\n                register={register}\r\n              />\r\n            </Route>\r\n            <Route exact path=\"/signin\">\r\n              <Login\r\n                title=\"Log in\"\r\n                buttonText=\"Log in\"\r\n                updateHeader={updateHeader}\r\n                authorize={authorize}           \r\n              />\r\n            </Route>\r\n            <Route exact path=\"/\">\r\n              { isLoggedIn ? <Redirect to=\"/\"/> : <Redirect to=\"/signin\" />}\r\n            </Route>\r\n          </Switch>\r\n          <EditAvatarPopup \r\n            isOpen={isEditAvatarPopupOpen} \r\n            onClose={closeAllPopups} \r\n            onUpdateAvatar={handleUpdateAvatar}\r\n          />\r\n          <EditProfilePopup \r\n            isOpen={isEditProfilePopupOpen} \r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser}\r\n          />\r\n          <AddPlacePopup \r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlaceSubmit={handleAddPlaceSubmit}\r\n          /> \r\n          <PopupWithForm \r\n              name='delete' \r\n              title='Are you sure?' \r\n              isOpen={false}\r\n              onClose={closeAllPopups}\r\n              buttonText='Yes'\r\n          />\r\n          <ImagePopup \r\n            card={selectedCard}\r\n            isOpen={selectedCard ? true : false}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <InfoToolTip\r\n            isOpen={isInfoToolTipOpen}\r\n            onClose={closeAllPopups}\r\n            iconMessage={iconMessage}\r\n            textMessage={textMessage}\r\n          />          \r\n          <Footer />\r\n        </CurrentUserContext.Provider>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n    \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}